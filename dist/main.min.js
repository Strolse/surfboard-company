"use strict";var map,openItem=function(e){var t=e.closest(".team__item"),n=t.find(".team__content"),e=n.find(".team__content-main").outerHeight();t.addClass("active"),n.height(e)},closeItem=function(e){e=e.find(".team__content");e.height(0),e.closest(".team__item").removeClass("active")};$(".team__title").on("click",function(e){var t=$(e.currentTarget),n=t.closest(".team"),o=t.closest(".team__item"),i=t.find(".team__title-svg-path"),e=n.find(".team__title-svg-path");o.hasClass("active")?(closeItem(n),i.attr("xlink:href","./img/icons/sprite.svg#triangle-down")):(closeItem(n),openItem(t),e.attr("xlink:href","./img/icons/sprite.svg#triangle-down"),i.attr("xlink:href","./img/icons/sprite.svg#triangle-up"))});var init=function(){map=new ymaps.Map("map",{center:[55.751774,37.593535],zoom:14,controls:[]});var e=new ymaps.Placemark([55.749081,37.604367],{},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/icons/marker.svg",iconImageSize:[58,73],iconImageOffset:[-56,-70]});map.geoObjects.add(e),map.behaviors.disable("scrollZoom")};ymaps.ready(init);var openMenu=document.querySelector("#hamburger"),fullscreenMenu=document.querySelector("#fullscreen-menu"),menu=document.querySelector("#menu"),close=document.querySelector("#fullscreen-menu__close");openMenu.addEventListener("click",function(e){e.preventDefault(),fullscreenMenu.style.display="block",menu.style.display="block"}),close.addEventListener("click",function(e){e.preventDefault,fullscreenMenu.style.display="none",menu.style.display="none"}),menu.addEventListener("click",function(e){e.preventDefault,e.target.classList.contains("menu__link")&&(fullscreenMenu.style.display="none",menu.style.display="none")});var validateFields=function(e,t){return t.forEach(function(e){e.removeClass("error"),""==e.val().trim()&&e.addClass("error")}),0==e.find(".error").length};$(".form").on("submit",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.find("[name='name']"),o=t.find("[name='phone']"),i=t.find("[name='comment']"),e=t.find("[name='to']"),a=$("#modal").find(".modal__text");a.removeClass("error"),validateFields(t,[n,o,i,e])&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:n.val(),phone:o.val(),comment:i.val(),to:e.val()}})).done(function(e){a.text(e.message)}),e.fail(function(e){e=e.responseJSON.message;a.text(e),a.addClass("error")}),e.always($.fancybox.open({src:"#modal",type:"inline",smallBtn:!1})))}),$(".app-modal-close").on("click",function(e){e.preventDefault(),$.fancybox.close()});var sections=$("section"),display=$(".maincontent"),fixedMenu=$(".fixed-menu"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile(),inScroll=!1;sections.first().addClass("active");var countPosition=function(e){return-100*e},changeTheme=function(e){var t="fixed-menu--theme--dark";"dark"==sections.eq(e).attr("data-fixedmenu-theme")?fixedMenu.addClass(t):fixedMenu.removeClass(t)},makeTransion=function(e){var t;0==inScroll&&(inScroll=!0,t=countPosition(e),display.css({transform:"translateY(".concat(t,"%)")}),sections.eq(e).addClass("active").siblings().removeClass("active"),changeTheme(e),setTimeout(function(){inScroll=!1,fixedMenu.find(".fixed-menu__item").eq(e).addClass("fixed-menu__item--active").siblings().removeClass("fixed-menu__item--active")},1300))},defineSection=function(e){var t=sections.filter(".active"),n=t.next(),t=t.prev();"next"==e&&n.length&&makeTransion(n.index()),"prev"==e&&t.length&&makeTransion(t.index())};$(window).on("wheel",function(e){e=e.originalEvent.deltaY;0<e&&defineSection("next"),e<0&&defineSection("prev")}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase();if(!("input"==t||"textarea"==t))switch(e.keyCode){case 38:defineSection("prev");break;case 40:defineSection("next")}}),$(".wrapper").on("touchmove",function(e){e.preventDefault()}),$("[data-scroll-to]").on("click",function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));makeTransion(e.index())}),isMobile&&$("body").swipe({swipe:function(e,t){defineSection();defineSection("down"==t?"prev":"up"==t?"next":"")}});var durationControl,soundControl,intervalId,soundLevel,soundLev,playButton=document.querySelector(".video__player-img"),video=document.getElementById("player"),playControlButton=document.querySelector(".duration__img"),videoWrapper=document.querySelector(".video__wrapper"),soundButton=document.querySelector(".sound");function playStop(){playButton.classList.toggle("video__player-img--active"),video.paused?(video.play(),intervalId=setInterval(updateDuration,1e3/60),playControlButton.classList.add("active")):(video.pause(),clearInterval(intervalId),playControlButton.classList.remove("active"))}function setVideoDuration(){video.currentTime=durationControl.value,updateDuration()}function updateDuration(){durationControl.value=video.currentTime;var e=video.duration/100,e=video.currentTime/e;durationControl.style.background="linear-gradient(90deg, #FEDB3F 0%, #FEDB3F ".concat(e,"%, #626262 ").concat(e,"%)")}function soundOf(){0===video.volume?(video.volume=soundLevel,soundLev.value=10*soundLevel,soundButton.classList.remove("active")):(soundLevel=video.volume,video.volume=0,soundLev.value=0,soundButton.classList.add("active"))}function changeSoundVolume(){video.volume=soundLev.value/10,0===video.volume?soundButton.classList.add("active"):soundButton.classList.remove("active")}function updateSoundVolume(){soundLev.value=video.volume;var e=video.volume/10,e=video.currentTime/e;durationControl.style.background="linear-gradient(90deg, #FEDB3F 0%, #FEDB3F ".concat(e,"%, #626262 ").concat(e,"%)")}video.addEventListener("loadeddata",function(){video.addEventListener("click",playStop),videoWrapper.addEventListener("click",function(e){e.target.classList.contains("play")&&playStop()}),(durationControl=document.getElementById("durationLevel")).addEventListener("input",setVideoDuration),durationControl.min=0,durationControl.value=0,durationControl.max=video.duration,video.addEventListener("ended",function(){playButton.classList.toggle("video__player-img--active"),video.currentTime=0,playControlButton.classList.remove("active"),clearInterval(intervalId)}),document.querySelector(".sound__button").addEventListener("click",soundOf),(soundLev=document.getElementById("soundLevel")).addEventListener("input",changeSoundVolume),soundLev.min=0,soundLev.max=10,soundLev.value=soundLev.max}),function(){function o(e){var t=e.find(".products-menu__item"),e=e.find(".products-menu__content");t.removeClass("active"),e.width(0)}function i(e){var t,n,o,i,a=e.find(".products-menu__content"),r=e.find(".products-menu__content-main"),s=(t=e,n=0,o=$(window).width(),s=t.closest(".products-menu").find(".products-menu__title"),i=s.width()*s.length,s=t.find(".products-menu__content-main"),t=parseInt(s.css("padding-left")),s=parseInt(s.css("padding-right")),{container:n=window.matchMedia("(max-width: 850px)").matches?o-i:524,content:n-t-s});e.addClass("active"),a.width(s.container),r.width(s.content)}$(".products-menu__title").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).closest(".products-menu__item"),n=t.hasClass("active"),e=t.closest(".products-menu");n?o(e):(o(e),i(t))})}();var slider=$(".products").bxSlider({controls:!1,pager:!1});$("#arrow-next").on("click",function(e){e.preventDefault(),slider.goToNextSlide()}),$("#arrow-prev").on("click",function(e){e.preventDefault(),slider.goToPrevSlide()});var findDataPair=function(n){return $(".reviews__item").filter(function(e,t){return $(t).attr("data-to-link")==n})};$(".avatar-click__link").on("click",function(e){e.preventDefault();var t=$(e.currentTarget),e=t.attr("data-open"),e=findDataPair(e),t=t.closest(".avatar-click");e.addClass("active").siblings().removeClass("active"),t.addClass("active").siblings().removeClass("active")});